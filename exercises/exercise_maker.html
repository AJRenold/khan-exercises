<!DOCTYPE html>
<head>

	<meta charset="UTF-8" />
	<title>Exercise maker</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
	<script>
		function genHead( title ){
			var head = '' +  
				'<!DOCTYPE html>' +
				'<html data-require="math math-format expressions">' +
				'<head>' +
				'	<meta charset="UTF-8" />' +
				'       <title>' + title + '</title>' +
				'       <script src="../khan-exercise.js"></script\> ' +
				'</head>' ; 
			return head;
		}
		function generate(){
		var html =  genHead("teshhht") + '<body>' +
'	<div class="exercise">' +
'	<div class="vars">' +
'		<var id="H">randRange(-9, 9)</var>' +
'		<var id="K">randRange(-9, 9)</var>' +
'		<var id="R">randRange(1, 7)</var>' +
'' +
'		<var id="X2T">H === 0 ? "x^2" : expr(["^", ["+", "x", -H], 2])</var>' +
'		<var id="Y2T">K === 0 ? "y^2" : expr(["^", ["+", "y", -K], 2])</var>' +
'	</div>' +
'' +
'	<div class="problems">' +
'		<div>' +
'			<div class="question">' +
'				<p>The equation of a circle <code>C</code> is <code><var>expr(["+", X2T, Y2T])</var> = <var>R * R</var></code>.</p>' +
'				<p>What are its center <code>(h, k)</code> and its radius <code>r</code>?</p>' +
'			</div>' +
'' +
'			<div class="solution" data-type="multiple">' +
'				<p class="short"><code>(h, k) = (</code><span class="sol"><var>H</var></span><code>,</code> <span class="sol"><var>K</var></span><code>)</code></p>' +
'				<p><code>r</code> = <span class="sol"><var>R</var></span></p>' +
'				<div><input type="button" value="Increase slope" "></div>' +
'			</div>' +
'		</div>' +
'	</div>' +
'' +
'	<div class="hints">' +
'		<p>The equation of a circle with center <code>(h, k)</code> and radius <code>r</code> is <code>(x - h)^2 + (y - k)^2 = r^2</code>.</p>' +
'		<p>We can rewrite the given equation as <code>(x - <var>negParens(H)</var>)^2 + (y - <var>negParens(K)</var>)^2 = <var>R</var>^2</code>.</p>' +
'		<p>Thus, <code>(h, k) = (<var>H</var>, <var>K</var>)</code> and <code>r = <var>R</var></code>.</p>' +
'	</div>' +
'	</div>' +
'</body>' +
'</html>';
	$("#test").remove();	
        var $frame = $('<iframe id="test" style="width:800px; height:600px;">'); 
        $('body').append( $frame ); 

		setTimeout( function() { 
		var ifrm = document.getElementById('test');
		ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
		ifrm.document.open();
		ifrm.document.write(html);
		ifrm.document.close();
 
        }, 1 ); 
}
</script>
<body onload='generate()'>

	<input id="title">
	<input type="button" value="Generate" onClick="generate();">
	<div id="fr">
	</div>
</body>
</html>
