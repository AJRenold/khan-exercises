<!DOCTYPE html>
<html data-require="math graphie">
<head>
	<title>Addition 3</title>
	<script src="../khan-exercise.js"></script>
	<script>
		function drawDigits ( digits, startX, startY ) {
			with ( KhanUtil.currentGraph ) {
				jQuery.each( digits, function( index, digit ) {
					var str = "\\Huge{" + digit + "}";
					label( [ startX - index, startY ], str );
				});
			}
		}
	</script>
</head>
<body>
	<div class="exercise">
		<div class="vars">
			<var id="A">randRange( 100, 999 )</var>
			<var id="B">randRange( 10, 999 )</var>
			<var id="A_DIGITS">digits( A )</var>
			<var id="B_DIGITS">digits( B )</var>
			<var id="B_PADDED">
				padDigits( B_DIGITS, max( A_DIGITS.length, B_DIGITS.length ) )
			</var>
			<var id="ANSWER">[]</var>
			<var id="CARRY">0</var>
		</div>

	<div class="problems">
		<div>
			<div class="graphie" id="numbers">
				init({
					range: [ [ -1, 4 ], [ -0.5, 3 ] ],
					scale: [30, 45]
				});
				drawDigits( A_DIGITS, 3, 2 );
				drawDigits( B_DIGITS, 3, 1 );

				path( [ [ -0.5, 0.5 ], [ 3.5, 0.5 ] ]);

				label( [ 0, 1 ] ,"\\huge{ + }" );
			</div>
			<div class="solution"><var>A + B</var></div>
		</div>
	</div>
	<div class="hints">
		<p>Add the top and bottom numbers, starting from the right and moving towards the left.</p>
		<div class="graphie" data-update="numbers" data-each="A_DIGITS as index, value">
			var sum = A_DIGITS[ <var>index</var> ] + B_PADDED[ <var>index</var> ] + CARRY;
			CARRY = floor( sum / 10 );
			if ( CARRY !== 0 ) {
				label( [ 2 - <var>index</var>, 3 ], CARRY, "below" );
			}
			label( [ 3 - <var>index</var>, 0 ], "\\Huge{" + sum % 10 + "}");
		</div>
		<div data-if="A + B &gt; 999">
			<div class="graphie" data-update="numbers" >
				label( [ 0, 0 ], "\\Huge{" + CARRY + "}" );
			</div>
		</div>
	</div>
	</div>
</body>
</html>
